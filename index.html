<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<title>Transitions demo</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!-- <script src="modernizr.js"></script> -->
	<!-- <link href='http://fonts.googleapis.com/css?family=Coustard' rel='stylesheet' type='text/css'> -->
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="frame">
	<div id="slideshow"></div>
	<div id="gui">
		<button id="none">none</button>
		<button id="cross-fade">cross fade</button>
		<fieldset id="sliding-door">
			<legend>sliding door</legend>
			<button>left</button>
			<button>right</button>
			<button>top</button>
			<button>bottom</button>
		</fieldset>
		<fieldset id="sliding-doors">
			<legend>sliding doors</legend>
			<button>horizontal</button>
			<button>vertical</button>
		</fieldset>
		<fieldset id="slide">
			<legend>slide</legend>
			<button>left</button>
			<button>right</button>
		</fieldset>
	</div> <!-- #gui -->
</div> <!-- #frame -->
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script>!window.jQuery && document.write('<script src="http://code.jquery.com/jquery-1.6.2.min.js"><\/script>');</script>
	<script src="css-hooks.js"></script>
	<script src="jquery.easing.1.3.js"></script>
	<!-- <script src="none.js"></script> -->
	<!-- <script src="cross-fade.js"></script> -->
	<!-- <script src="slide.js"></script> -->
	<script src="slideshow.js"></script>
	<script src="sliding-door.js"></script>
	<script src="sliding-doors.js"></script>
	<script>
			images = [
				//'img/fractal-e2.jpg',
				//'img/fractal-e9.jpg'
				'img/geisha.jpg',
				'img/Hearts_Candy_by_cottoncandipixie.jpg'
			],
			//transBtns = $('#sliding-door button'),
			guiElems = $('#gui button')
		;

		$(document).bind('imagesLoaded', initSlideshow);
		preloadImages();
		initGUI();
		
		function preloadImages() {
			var
				numImages = images.length,
				count = numImages,
				i
			;
			for (i = 0; i < numImages; ++i) {
				img = new Image();
				img.onload = function() {
					if (--count === 0)
						$(document).trigger('imagesLoaded');
				};
				img.src = images[i];
			}
		}
		
		function initGUI() {
			slideshow.bind('afterTransition', function() {
				//transBtns.attr('disabled', '');
				console.log('afterTransition');
				guiElems.removeAttr('disabled');
			});
			
			$('#gui').delegate('button', 'click', function(e) {
				guiElems.attr('disabled', 'disabled');
				e.stopPropagation();
			});
			
			$('#sliding-door').delegate('button', 'click', function(e) {
				setTransition('sliding door', {dir: $(e.target).text()});
				play();
			});
			
			$('#sliding-doors').delegate('button', 'click', function(e) {
				setTransition('sliding doors', {axis: $(e.target).text()});
				play();
			});
			
			$('#slide').delegate('button', 'click', function(e) {
				play('slide');
			});
			
			$('#none').click(function() {
				play('none');
				return false;
			});
			
			$('#cross-fade').click(function() {
				play('cross-fade');
			});
		}
	</script>
</body>
</html>