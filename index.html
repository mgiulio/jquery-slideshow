<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<title>Transitions demo</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!-- <link href='http://fonts.googleapis.com/css?family=Coustard' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
		*  { margin: 0; padding: 0;}
		html {
			background-color: #000;
		}
		body {
			/*font-family: 'Coustard', serif;*/
		}
		#page-wrap {
			width: 720px;
			margin: 0 auto;
			background-color: #ddd;
			border: 2px solid #999;
			padding: 20px;
			margin-top: 10px;
		}
		#slideshow {
			width: 500px;
			height: 250px;
			margin: 80px auto;
			border: 1px solid #aaa;
			background-color: #444
		}
		a {
			color: #ffa500;
			text-decoration: none;
		}
		a:hover {
			text-decoration: underline;
		}
		a:visited {
			color: #d67600;
		}
		a:active{
			color: #ffff00;
		}
		button {
			padding: 5px;
		}
		/*
		button.transition {
			background-color: #000;
			color: orange;
			font-weight: bold;
			font-family: monospace;
			border-radius: 5px;
		}
		*/
	</style>
</head>
<body>
	<div id="page-wrap">
		<div id="slideshow"></div>

		<div id="gui">
			<fieldset id="sliding-door">
				<legend>sliding door</legend>
				<button>left</button>
				<button>right</button>
				<button>top</button>
				<button>bottom</button>
			</fieldset>
			
			<fieldset id="sliding-doors">
				<legend>sliding doors</legend>
				<button>horizontal</button>
				<button>vertical</button>
			</fieldset>
			
			<fieldset id="slide">
				<legend>slide</legend>
				<button>left</button>
				<button>right</button>
			</fieldset>
			
			<button id="none">none</button>
			<button id="cross-fade">cross fade</button>
		</div>
	</div>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script>!window.jQuery && document.write('<script src="http://code.jquery.com/jquery-1.6.2.min.js"><\/script>');</script>
	<script src="jquery.easing.1.3.js"></script>
	<script src="slideshow.js"></script>
	<script src="none.js"></script>
	<script src="sliding-door.js"></script>
	<script src="sliding-doors.js"></script>
	<script src="cross-fade.js"></script>
	<script src="slide.js"></script>
	<script>
			images = [
				'fractal-e2.jpg',
				'fractal-e9.jpg'
			],
			//transBtns = $('#sliding-door button'),
			guiElems = $('#gui button')
		;

		$(document).bind('imagesLoaded', initSlideshow);
		preloadImages();
		initGUI();
		
		function preloadImages() {
			var
				numImages = images.length,
				count = numImages,
				i
			;
			for (i = 0; i < numImages; ++i) {
				img = new Image();
				img.onload = function() {
					if (--count === 0)
						$(document).trigger('imagesLoaded');
				};
				img.src = images[i];
			}
		}
		
		function initGUI() {
			slideshow.bind('afterTransition', function() {
				//transBtns.attr('disabled', '');
				console.log('afterTransition');
				guiElems.removeAttr('disabled');
			});
			
			$('#gui').delegate('button', 'click', function(e) {
				guiElems.attr('disabled', 'disabled');
				e.stopPropagation();
			});
			
			$('#sliding-door').delegate('button', 'click', function(e) {
				transitions.slidingDoor($(this).text());
			});
			
			$('#sliding-doors').delegate('button', 'click', function(e) {
				transitions.slidingDoors($(this).text());
			});
			
			$('#slide').delegate('button', 'click', function(e) {
				transitions.slide($(this).text());
			});
			
			$('#none').click(function() {
				transitions.none();
				return false;
			});
			
			$('#cross-fade').click(function() {
				transitions[$(this).text()]();
			});
		}
	</script>
</body>
</html>